## Phase 5 · 마이페이지 사용자 요구사항 분석

### 1. 기능 범위 (MVP)

| 구분 | 설명 |
| --- | --- |
| 주문 내역 목록 | 로그인 사용자가 자신이 생성한 주문(`orders`)을 최신순으로 확인. 상태 필터(`pending`, `confirmed`, `cancelled`, ...) 제공. |
| 주문 상세 보기 | 주문 항목(`order_items`), 배송 정보, 결제 상태를 한 화면에서 확인. `app/orders/[id]` 재사용 또는 마이페이지 내 모달 형태 검토. |
| 계정 정보 요약 | Clerk 프로필 (이름, 이메일) 및 최근 로그인 정보 간단 표시. |
| 빈 상태 안내 | 주문이 없는 초기 사용자 대비 문구/CTA 제공. |

### 2. 사용자 시나리오

1. 사용자는 로그인 후 `마이페이지` 메뉴(네비게이션 우측 or 드롭다운)를 클릭.
2. 기본 화면에서 최근 주문 목록이 표시되고, 개별 주문을 클릭해 상세 확인.
3. 주문 상태에 따라 색상/배지로 구분. `pending` 상태는 “결제 대기”, `confirmed`는 “결제 완료”, `cancelled`는 “취소됨”.
4. 배송 정보/메모 확인 후 필요 시 “결제 영수증 보기(추후)” 또는 “재주문(판단)” CTA 제공 (MVP에서는 안내 정도로 제한).

### 3. 요구사항 정리

- **인증**: Clerk 세션을 활용해 자신의 주문만 조회. 미로그인 시 `sign-in`으로 리다이렉트.
- **데이터**:
  - `orders` 테이블 필드: `id`, `total_amount`, `status`, `created_at`, `shipping_address`, `order_note`.
  - `order_items`: `product_name`, `quantity`, `price` 등.
- **필터링**: 상태 필터 기본값 “전체”. 필요 시 `?status=confirmed` 등 쿼리 파라미터 활용.
- **페이지네이션**: 초기 MVP에선 10건 `limit` + `offset` 기반 “더보기” 버튼.
- **UX 고려**:
  - 로딩: skeleton 리스트 (3~5개).
  - 빈 상태: “아직 주문 내역이 없습니다. 상품을 둘러보세요.” + CTA.
  - 오류: “주문 정보를 불러오지 못했습니다.” + 재시도 버튼.

### 4. 제약 및 향후 확장 포인트

- 현재 `orders` 테이블에 배송 현황(배송중/완료) 필드 없음 → Phase 5에서는 상태 배지를 `status` 값으로 표현.
- 결제 영수증/환불 등은 후속 Phase 대상. 관련 CTA는 숨기거나 비활성 처리.
- 모바일 레이아웃: 카드형 리스트, 상세는 bottom sheet 또는 별도 페이지로 이동.

### 5. 산출물

- `docs/mypage/phase5-wireframe.md` (추가 예정): 레이아웃 스케치 및 컴포넌트 구조.
- `lib/supabase/queries/orders.ts` (예정): 주문/주문상세 조회 함수.
- 테스트 케이스 초안 (Vitest + Playwright).


